
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">
          <%# <%= image_tag("OlioRadinoLogo.jpg", height: '40', width: '35') %> 


  <%= link_to "Olio Radino", root_path, method: :get %>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
       <%= link_to "Home", root_path, method: :get %>
      </li>
      <li class="nav-item">
        <%= link_to "About", about_path, method: :get, class: "about"%>
      </li>
      <li class="nav-item">
        <%= link_to "Products", products_path, method: :get%>
        </li>
      <li class="nav-item">
       <%= link_to "Contact", contact_path, method: :get%>
      </li>
      <li class="nav-item">
       <%= link_to "Gallery", gallery_path, method: :get%>
      </li>
    </ul>
          <%= link_to image_tag("it.png", height: '20', width: '20', data:{locale: 'it'}), "#", class:'locale_switch', data:{locale: 'it'} %>
          <%= link_to image_tag("uk.png", height: '20', width: '20', data:{locale: 'en-US'}), "#", class:'locale_switch', data:{locale: 'en-US'} %>


  
    </div>

</nav>

<%=  content_for :javascript do %>
<script>
var url = new URL(window.location.href)
var locale = localStorage.getItem("locale") || "en-US";

var homeImage = document.querySelector('#home-image')

// Our story
var homeTitle = document.querySelector('#home-title')
var homeInformation = document.querySelector('#home-information')
var homeInformationImage = document.querySelector('#home-information-image')


// Our products
var homeProductTitle = document.querySelector('#home-product-title')
var homeProductText = document.querySelector('#home-product-text')
var homeProductImage = document.querySelector('#home-product-image')

window.client.getEntry('1tObOSALaX8lCVmhQZlDKk', {locale: locale}).then((info) => {
  
    // console.log(info)

    var myHome = {
        picture: info.fields.homeFirstImage,
        title: info.fields.homeTitle,
        information: info.fields.homeText,
        informationImage: info.fields.homeTextImage,

        productTitle: info.fields.homeProductTitle,
        productText: info.fields.homeProductText,
        productImage: info.fields.homeProductImage,
    }

    // Picture
    homeImage.innerHTML = buildPicture(myHome.picture)

    // Our Story
    homeTitle.innerText = myHome.title
    homeInformation.innerHTML = myHome.information.content.map(toHtml);
    homeInformationImage.innerHTML = buildPicture(myHome.informationImage)


    // Our products
    homeProductTitle.innerHTML = myHome.productTitle
    homeProductText.innerHTML = myHome.productText.content.map(toHtml);
    homeProductImage.innerHTML = buildPicture(myHome.productImage)
});


var toHtml = (text) => documentToHtmlString(text);

var buildPicture = (data) => {
    return `<div class="col text-center">
    <img src="https://${data.fields.file.url}" class="img-fluid" alt="Responsive image">
  </div>`
}

</script>

<% end  %>